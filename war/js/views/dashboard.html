<section id="dashboard">

  <div class="well well-large greetings">
    <h2>{{ui.dashboard.welcome}}, {{app.resources.name}}</h2>
  </div>

  <!-- row-fluid -->
  <div class="row-fluid">

      <!-- pie charts for groups -->
      <div class="widget {{(config.profile.p2000.status) && 'span8' || 'span12'}}">

        <div class="head">
          <!-- nav pills for weeker -->
          <ul id="weeker" class="nav nav-pills">
            <li class="{{(current==true) && 'active'}}"><a ng-click="weeker()">{{ui.dashboard.thisWeek}}</a></li>
            <li class="{{(current==false) && 'active'}}"><a ng-click="weeker()">Volgende Week</a></li>
          </ul>
          <!-- end nav pills for weeker -->
          <button class="btn btn-small" bs-modal="'js/views/elements/widget-pies.html'"><i class="icon-cog"></i></button>
        </div>
        <hr>

        <p class="muted" ng-show="loading.pies.status"><small><i>{{loading.pies.message}}</i></small></p>

        <!-- pie loop -->
        <ul class="itemslist" ng-hide="loading.pies.status">
          <li ng-repeat="pie in pies">

            <div class="block-title">
              <h4>{{pie.name}}</h4>
            </div>

            <div class="block" ng-show="current">

              <table>
                <tr>
                  <td><h6>Huidige status</h6></td>
                  <td>
                    <span class="badge badge-{{pie.current.cls}}">{{pie.current.diff}}</span>
                  </td>
                </tr>
                <tr>
                  <td><span class="muted"><i>Start:</i></span></td>
                  <td><small>{{pie.current.start}}</small></td>
                </tr>
                <tr>
                  <td><span class="muted"><i>End:</i></span></td>
                  <td><small>{{pie.current.end}}</small></td>
                </tr>
                <tr>
                  <td><span class="muted"><i>Behoefte:</i></span></td>
                  <td><small>{{pie.current.wish}} persoon(en)</small></td>
                </tr>
              </table>
            </div>

            <div class="block">
              <div id="weeklyPie-{{pie.id}}" class="pie"></div>
              <div class="info">
                <!-- <h3>{{pie.name|truncateGroupTitle}}</h3> -->
                <h3>
                  <span ng-show="current">Deze week</span>
                  <span ng-hide="current">Volgende week</span>
                </h3>
                <hr>
                <h5>{{pie.ratios.more}}%</h5> 
                <small class="muted">more</small>, 
                <h5>{{pie.ratios.even}}%</h5> 
                <small class="muted">even</small>, 
                <h5>{{pie.ratios.less}}%</h5> 
                <small class="muted">less</small>
              </div>
            </div>

          </li>
        </ul>
        <!-- end pie loop -->

        <hr class="lastline">
        <p>
          <small class="pull-right">
            <span class="text-warning">Periods: </span>
            <span class="muted">
              &nbsp;
              {{periods.start | nicelyDate}}
              &nbsp;/&nbsp;
              {{periods.end | nicelyDate}}
            </span>
          </small>
        </p>

      </div>
      <!-- end pie charts for groups -->

      <!-- announcements sidebar -->
      <div class="widget span4"
            ng-show="config.profile.p2000.status">

        <div class="head">
          <h4>Announcements</h4>
          <!-- <button class="btn btn-small"><i class="icon-cog"></i></button> -->
        </div>
        <hr>

        <!-- p2000 loop -->
        <ul class="itemslist">
          <li ng-repeat="alarm in alarms.list">
            <table>
              <tr>
                <td class="first">
                  <span class="prio label label-important"  ng-show="alarm.prio.1">PRIO 1</span>
                  <span class="prio label label-warning"    ng-show="alarm.prio.2">PRIO 2</span>
                  <span class="prio label label-info"       ng-show="alarm.prio.3">PRIO 3</span>
                  <span class="prio label label-inverse"    ng-show="alarm.prio.test">PROEFALARM</span>
                </td>
                <td class="last">
                  <p>{{alarm.body}}</p>
                </td>
              </tr>
              <tr>
                <td>
                  <small class="muted"><i>{{alarm.msgCode}}</i></small>
                </td>
                <td>
                  <span class="label label-natural pull-right">{{alarm.day}} {{alarm.time}}</span>
                </td>
              </tr>
            </table>
          </li>
        </ul>
        <!-- end p2000 loop -->
        <hr class="lastline">
        <p><small><a class="pull-right" ng-click="toggle(more.status)">{{more.text}}</a></small></p>

      </div>
      <!-- end announcements sidebar -->

  </div>
  <!-- end row-fluid -->

</section>